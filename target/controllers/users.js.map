{"version":3,"sources":["../../src/controllers/users.js"],"names":["router","express","Router","post","passport","authenticate","session","req","res","next","send","success","jwt","user","message","body","text","quickReplies","action","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEA,IAAMA,SAASC,kBAAQC,MAAR,EAAf;;AAEAF,OAEKG,IAFL,CAEU,QAFV,EAEoBC,mBAASC,YAAT,CAAsB,OAAtB,EAA+B,EAAEC,SAAS,KAAX,EAA/B,CAFpB,EAEwE,gBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,EAA0B;;AAE1FD,QAAIE,IAAJ,CAAS,EAAEC,SAAS,IAAX,EAAiBC,KAAKL,IAAIM,IAA1B,EAAT;AAGH,CAPL,EAQKV,IARL,CAQU,WARV,EAQuBC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CARvB,EAQyEF,mBAASC,YAAT,CAAsB,QAAtB,EAAgC,EAAEC,SAAS,KAAX,EAAhC,CARzE,EAQ8H,gBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,EAA0B;AAChJD,QAAIE,IAAJ,CAAS,EAAEC,SAAS,IAAX,EAAiBG,SAAS,gBAA1B,EAAT;AAEH,CAXL;;AAaI;AAbJ,CAcKX,IAdL,CAcU,YAdV,EAcwBC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAdxB,EAc0E,gBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,EAA0B;AAC5F,uCAAaF,IAAIQ,IAAJ,CAASD,OAAtB;AACAN,QAAIE,IAAJ,CAAS,EAAEC,SAAS,IAAX,EAAiBG,SAAS,iCAA1B,EAAT;AAEH,CAlBL;AAmBI;AAnBJ,CAoBKX,IApBL,CAoBU,YApBV,EAoBwBC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CApBxB,EAoB0E,gBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,EAA0B;AAC5F,QAAMO,OAAOT,IAAIQ,IAAJ,CAASC,IAAtB;AACA,QAAMC,eAAeV,IAAIQ,IAAJ,CAASE,YAA9B;AACA,QAAMC,SAAS,iBAAf;AACA;AACA,2CAAiBA,MAAjB,EAAyBF,IAAzB,EAA+BC,YAA/B;AACAT,QAAIE,IAAJ,CAAS,EAAEC,SAAS,IAAX,EAAiBG,SAAS,iCAA1B,EAAT;AAEH,CA5BL;;AAiCAK,OAAOC,OAAP,GAAiBpB,MAAjB","file":"users.js","sourcesContent":["import express from 'express';\r\nimport passport from 'passport';\r\nimport { updateBotMessage, callBradcast } from '../utils/helperFunctions';\r\n\r\nconst router = express.Router();\r\n\r\nrouter\r\n\r\n    .post('/login', passport.authenticate('login', { session: false }), async (req, res, next) => {\r\n\r\n        res.send({ success: true, jwt: req.user });\r\n\r\n\r\n    })\r\n    .post('/register', passport.authenticate('jwt', { session: false }), passport.authenticate('singup', { session: false }), async (req, res, next) => {\r\n        res.send({ success: true, message: \"Singup success\" });\r\n\r\n    })\r\n\r\n    //send notifications to everyone\r\n    .post('/broadcast', passport.authenticate('jwt', { session: false }), async (req, res, next) => {\r\n        callBradcast(req.body.message);\r\n        res.send({ success: true, message: \"Notification successfully sent.\" });\r\n\r\n    })\r\n    //update reminder text and response buttons\r\n    .post('/botUpdate', passport.authenticate('jwt', { session: false }), async (req, res, next) => {\r\n        const text = req.body.text;\r\n        const quickReplies = req.body.quickReplies;\r\n        const action = \"action@reminder\";\r\n        //cal the update function\r\n        updateBotMessage(action, text, quickReplies);\r\n        res.send({ success: true, message: \"Bot Message succesfully updated\" });\r\n\r\n    })\r\n    ;\r\n\r\n\r\n\r\nmodule.exports = router;"]}