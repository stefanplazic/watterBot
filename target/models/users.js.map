{"version":3,"sources":["../../src/models/users.js"],"names":["mongoose","require","bcrypt","saltRounds","Schema","UserSchema","email","type","String","trim","required","uniqe","password","pre","next","hashSync","methods","isValidPassword","user","compare","module","exports","model"],"mappings":";;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,SAASD,QAAQ,QAAR,CAAf;AACA,IAAME,aAAa,EAAnB;AACA;AACA,IAAMC,SAASJ,SAASI,MAAxB;AACA,IAAMC,aAAa,IAAID,MAAJ,CAAW;;AAE1BE,WAAO;AACHC,cAAMC,MADH;AAEHC,cAAM,IAFH;AAGHC,kBAAU,IAHP;AAIHC,eAAO;AAJJ,KAFmB;AAQ1BC,cAAU;AACNL,cAAMC,MADA;AAENC,cAAM,IAFA;AAGNC,kBAAU;AAHJ;AARgB,CAAX,CAAnB;AAcA;AACAL,WAAWQ,GAAX,CAAe,MAAf,EAAuB,UAAUC,IAAV,EAAgB;AACnC,SAAKF,QAAL,GAAgBV,OAAOa,QAAP,CAAgB,KAAKH,QAArB,EAA+BT,UAA/B,CAAhB;AACAW;AACH,CAHD;;AAKAT,WAAWW,OAAX,CAAmBC,eAAnB,GAAqC,gBAAgBL,QAAhB,EAA0B;AAC3D,QAAMM,OAAO,IAAb;AACA;AACA;AACA,QAAMC,UAAU,MAAMjB,OAAOiB,OAAP,CAAeP,QAAf,EAAyBM,KAAKN,QAA9B,CAAtB;AACA,WAAOO,OAAP;AACH,CAND;;AAQAC,OAAOC,OAAP,GAAiBrB,SAASsB,KAAT,CAAe,MAAf,EAAuBjB,UAAvB,CAAjB","file":"users.js","sourcesContent":["const mongoose = require('mongoose');\r\nconst bcrypt = require('bcrypt');\r\nconst saltRounds = 10;\r\n//Define a schema\r\nconst Schema = mongoose.Schema;\r\nconst UserSchema = new Schema({\r\n\r\n    email: {\r\n        type: String,\r\n        trim: true,\r\n        required: true,\r\n        uniqe: true\r\n    },\r\n    password: {\r\n        type: String,\r\n        trim: true,\r\n        required: true\r\n    }\r\n});\r\n// hash user password before saving into database\r\nUserSchema.pre('save', function (next) {\r\n    this.password = bcrypt.hashSync(this.password, saltRounds);\r\n    next();\r\n});\r\n\r\nUserSchema.methods.isValidPassword = async function (password) {\r\n    const user = this;\r\n    //Hashes the password sent by the user for login and checks if the hashed password stored in the \r\n    //database matches the one sent. Returns true if it does else false.\r\n    const compare = await bcrypt.compare(password, user.password);\r\n    return compare;\r\n}\r\n\r\nmodule.exports = mongoose.model('User', UserSchema);"]}